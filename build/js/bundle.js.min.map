{"version":3,"sources":["app.js"],"names":["pagina","cita","nombre","fecha","hora","servicios","iniciarApp","mostrarServicios","mostrarSeccion","cambiarSeccion","PaginaSiguiente","PaginaAnterior","botonesPaginador","mostrarResumen","nombreCita","fechaCita","deshabilitarDiasPasados","seccionAnterior","document","querySelector","classList","remove","add","tabAnterior","querySelectorAll","forEach","boton","addEventListener","e","preventDefault","parseInt","target","dataset","paso","async","resultado","fetch","db","json","servicio","id","precio","nombreServicio","createElement","textContent","costoServicio","divContendor","idServicios","onclick","seleccionarServicios","appendChild","error","console","log","elemento","tagName","parentElement","contains","eliminarServicio","agregarServicio","firstElementChild","nextElementSibling","filter","servicioObj","siguiente","anterior","seccionTres","firstChild","removeChild","Object","values","includes","noServicios","innerHTML","nombreTexto","value","trim","length","mostararAlertas","alerta","msj","tipo","alert","setTimeout","fechaInput","dia","Date","getUTCDay","fechaAhora","year","getFullYear","mes","getMonth","setDate","getDate","fechaDeshabilitar","min"],"mappings":"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","file":"bundle.js","sourcesContent":["let pagina=1;\r\nconst cita={\r\n    nombre='',\r\n    fecha='',\r\n    hora='',\r\n    servicios=[],\r\n}\r\n\r\ndocument.addEventListener('DOMContentLoaded',()=>{\r\n    iniciarApp();\r\n});\r\n\r\nfunction iniciarApp(){\r\n    mostrarServicios();\r\n\r\n    //resalta el tab ssegun el seleccionado\r\n    mostrarSeccion();\r\n    //oculata o muestra la seccion del tab \r\n    cambiarSeccion();\r\n\r\n    //paginacion siguiente y anterior\r\n    PaginaSiguiente();\r\n\r\n    PaginaAnterior();\r\n\r\n    //combrueba la paginacion para ocultar o mostar los botones de siguiente o anterior\r\n    botonesPaginador();\r\n\r\n    //muestra el resumen de la cita\r\n    mostrarResumen();\r\n\r\n    //almacena el nombre\r\n    nombreCita();\r\n\r\n    //almacena la fecha\r\n    fechaCita();\r\n\r\n    //desabilita dias pasados\r\n    deshabilitarDiasPasados();\r\n}\r\n\r\nfunction mostrarSeccion() {\r\n\r\n    const seccionAnterior=document.querySelector('.tab-seleccionado');\r\n\r\n    if(seccionAnterior){\r\n        seccionAnterior.classList.remove('tab-seleccionado');\r\n    }\r\n    \r\n    const seccionActual=document.querySelector(`#paso-${pagina}`)\r\n    seccionActual.classList.add('tab-seleccionado');\r\n\r\n    const tabAnterior= document.querySelector('.tabs button.actual');\r\n    if(tabAnterior){\r\n        //eleimnar la clase de actual del tab anterior\r\n        tabAnterior.classList.remove('actual');\r\n    }\r\n    \r\n    //resaltar btn seleccionados\r\n    const tabs=document.querySelector(`[data-paso=\"${pagina}\"]`);\r\n    tabs.classList.add('actual');\r\n}\r\n\r\n\r\nfunction cambiarSeccion() {\r\n    let botones=document.querySelectorAll('.tabs button');\r\n\r\n    botones.forEach((boton)=>{\r\n        boton.addEventListener('click',(e)=>{\r\n            e.preventDefault();\r\n            pagina=parseInt(e.target.dataset.paso);\r\n\r\n            mostrarSeccion();\r\n            botonesPaginador();\r\n        })\r\n    })\r\n}\r\n\r\nasync function mostrarServicios() {\r\n    //try catch para errores como conectar a una bd o api\r\n    try {\r\n        //obtenemos respuestas del json y los datos\r\n        const resultado=await fetch('./servicios.json');\r\n        const db=await resultado.json();\r\n        \r\n        const {servicios}=db;\r\n\r\n        //generar el html\r\n\r\n        servicios.forEach(servicio => {\r\n            const {id,nombre,precio}=servicio;\r\n\r\n            //dom scripting\r\n\r\n            //nombres servicio\r\n            const nombreServicio=document.createElement('P');\r\n            nombreServicio.textContent=nombre;\r\n            nombreServicio.classList.add('nombre_servicio');\r\n\r\n            //precio servicio\r\n            const costoServicio=document.createElement('span');\r\n            costoServicio.textContent=`$ ${precio}`;\r\n            costoServicio.classList.add('precio_servicio');\r\n           \r\n            //generar div que contiene la info\r\n            const divContendor=document.createElement('DIV');\r\n            divContendor.classList.add('servicio');\r\n            divContendor.dataset.idServicios=id;\r\n\r\n            //selecciona un servicio para la cita\r\n            divContendor.onclick=seleccionarServicios;\r\n\r\n\r\n            //inyectar al div\r\n            divContendor.appendChild(nombreServicio);\r\n            divContendor.appendChild(costoServicio);\r\n\r\n           \r\n            //inyectar al html\r\n           document.querySelector('#listado_servicios').appendChild(divContendor);\r\n\r\n\r\n            \r\n        });\r\n\r\n\r\n      \r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n}\r\n\r\nfunction seleccionarServicios(e) {\r\n    \r\n    let elemento;\r\n    //para que le de click al div\r\n    if(e.target.tagName==='P' || e.target.tagName==='SPAN'){\r\n        //va hacia el elemnto padre\r\n        elemento=e.target.parentElement;\r\n    }else{\r\n        elemento=e.target;\r\n        \r\n    }\r\n  \r\n   let result = elemento.classList.contains('seleccionar');\r\n\r\n   if (result) {\r\n       elemento.classList.remove('seleccionar');\r\n\r\n      const id=parseInt(elemento.dataset.idServicios);\r\n\r\n       eliminarServicio(id);\r\n   }else{\r\n    elemento.classList.add('seleccionar');\r\n\r\n      \r\n\r\n      const servicioObj={\r\n          id:parseInt(elemento.dataset.idServicios),\r\n          nombre:elemento.firstElementChild.textContent,\r\n          precio:elemento.firstElementChild.nextElementSibling.textContent,\r\n\r\n      }\r\n      //console.log(servicioObj);\r\n\r\n    agregarServicio(servicioObj);\r\n   }\r\n   \r\n}\r\n\r\n\r\nfunction eliminarServicio(id) {\r\n    const {servicios}=cita;\r\n\r\n    //filtra y se trae los que son diferentes al id\r\n    cita.servicios=servicios.filter(servicio => servicio.id !==id);\r\n\r\n   \r\n}\r\n\r\nfunction agregarServicio(servicioObj) {\r\n    const {servicios}=cita;\r\n    //copiar un arreglo para agrgar el servicio\r\n    cita.servicios=[...servicios,servicioObj];\r\n   \r\n}\r\n\r\n\r\nfunction PaginaSiguiente() {\r\n    const siguiente=document.querySelector('#siguiente');\r\n    siguiente.addEventListener('click',()=>{\r\n        pagina++;\r\n        \r\n        botonesPaginador();\r\n    })\r\n}\r\n\r\nfunction PaginaAnterior() {\r\n    const anterior=document.querySelector('#anterior');\r\n    anterior.addEventListener('click',()=>{\r\n        pagina--;\r\n        console.log(pagina);\r\n        botonesPaginador();\r\n        \r\n    })\r\n}\r\n\r\n\r\nfunction botonesPaginador() {\r\n    const siguiente=document.querySelector('#siguiente');\r\n    const anterior=document.querySelector('#anterior');\r\n\r\n    if(pagina===1){\r\n        anterior.classList.add('ocultar');\r\n    }else if(pagina===3){\r\n        siguiente.classList.add('ocultar');\r\n        anterior.classList.remove('ocultar');\r\n\r\n        mostrarResumen();\r\n    }else{\r\n       siguiente.classList.remove('ocultar');\r\n        anterior.classList.remove('ocultar');\r\n    }\r\n    mostrarSeccion();\r\n}\r\n\r\nfunction mostrarResumen() {\r\n    //destructuring\r\n    const {nombre,fecha,hora,servicios}=cita;\r\n    \r\n    let seccionTres=document.querySelector('.seccion_tres');\r\n\r\n   while (seccionTres.firstChild) {\r\n       seccionTres.removeChild(seccionTres.firstChild);\r\n   }\r\n\r\n    //validar objeto\r\n    //extaer los valores de un objeto\r\n    if(Object.values(cita).includes('')){\r\n        const noServicios=document.createElement('P');\r\n        noServicios.textContent=\"El nombre, la fecha o la hora no pueden estar vacios\"\r\n        noServicios.classList.add('msjError');\r\n\r\n        seccionTres.appendChild(noServicios);\r\n        \r\n        return;\r\n    }\r\n\r\n    const nombreCita=document.createElement('P');\r\n    nombreCita.innerHTML=`<span>Nombre:</span>${nombre}`;\r\n    seccionTres.appendChild(nombreCita);\r\n    console.log(nombreCita);\r\n}\r\n\r\nfunction nombreCita() {\r\n    const nombreInput=document.querySelector('#nombre');\r\n\r\n    nombreInput.addEventListener('input',(e)=>{\r\n        const nombreTexto=e.target.value.trim();\r\n\r\n        //validar input\r\n        if(nombreTexto==='' || nombreTexto.length< 3){\r\n            mostararAlertas('Nombre vacio','error');\r\n        }else{\r\n            const alerta=document.querySelector('.alerta');\r\n            if(alerta){\r\n                alerta.remove();\r\n            }\r\n            cita.nombre=nombreTexto;\r\n            \r\n        }\r\n        \r\n    })\r\n}\r\n\r\nfunction mostararAlertas(msj,tipo) {\r\n\r\n    //si ya hay una alerta no crear otra\r\n    const alertaprevia=document.querySelector('.alerta');\r\n    if(alertaprevia){\r\n        return;\r\n    }\r\n   const alert=document.createElement('DIV');\r\n   alert.textContent=msj;\r\n   alert.classList.add('alerta');\r\n\r\n   if(tipo='error'){\r\n       alert.classList.add('error');\r\n\r\n   }\r\n\r\n   //insertar en elformulario\r\n   const formulario=document.querySelector('.formulario');\r\n   formulario.appendChild(alert);\r\n   \r\n   //eliminar la alerta despues de 3 s\r\n   setTimeout(() => {\r\n       alert.remove();\r\n   }, 3000);\r\n\r\n}\r\n\r\nfunction fechaCita() {\r\n    const fechaInput=document.querySelector('#fecha');\r\n\r\n    fechaInput.addEventListener('input',(e)=>{\r\n    \r\n        const dia=new Date(e.target.value).getUTCDay();\r\n\r\n        if([0].includes(dia)){\r\n            e.preventDefault();\r\n            fechaInput.value='';\r\n            console.log('domingo no es valido');\r\n            mostararAlertas('Los Domingos no hay Servicio','error');\r\n        }else{\r\n            cita.fecha=fechaInput.value;\r\n\r\n           \r\n        }\r\n    });\r\n\r\n\r\n}\r\n\r\nfunction deshabilitarDiasPasados() {\r\n    const fechaInput=document.querySelector('#fecha');\r\n    \r\n    // Obtencion de el año, mes, dia\r\n   const fechaAhora = new Date();\r\n   const year = fechaAhora.getFullYear();\r\n   let mes = fechaAhora.getMonth() + 1;\r\n\r\n   // suma un día a la fecha actual sin inconvenientes, por ejemplo, si el \r\n   //día actual es 31 de marzo y se le suma un día, la fecha sería 1 de abril\r\n   fechaAhora.setDate(fechaAhora.getDate() + 1);\r\n\r\n   let dia = fechaAhora.getDate();\r\n\r\n   if(mes < 10){\r\n      mes = `0${mes}`;\r\n   }\r\n\r\n   if(dia < 10){\r\n      dia = `0${dia}`;\r\n   }\r\n\r\n   // Formato de la fecha minima AAAA-MM-DD \r\n   let fechaDeshabilitar = `${year}-${mes}-${dia}`;\r\n\r\n   fechaInput.min = fechaDeshabilitar;\r\n\r\n    \r\n   \r\n}"]}